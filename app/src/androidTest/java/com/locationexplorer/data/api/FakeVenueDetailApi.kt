package com.locationexplorer.data.api

import com.locationexplorer.data.model.response.venue_api.VenueResponse
import com.squareup.moshi.Moshi
import java.io.IOException

class FakeVenueDetailApi(private val moshi: Moshi) : VenueDetailApi {
    var shouldThrowIoException = false
    private val venueApiSampleResponse =
        "{\"meta\":{\"code\":200,\"requestId\":\"610cf15260e17522d31a8b38\"},\"response\":{\"venue\":{\"id\":\"56dd2da9498e60abde9c2b0f\",\"name\":\"Gol-e Gandom Dizi Place | دیزی سرای گل گندم\",\"contact\":{},\"location\":{\"address\":\"شهرک اکباتان، بیمه چهارم، بالاتر از پارک مینا، پلاک ۱۱۷\",\"lat\":35.70702307908398,\"lng\":51.31716460382234,\"labeledLatLngs\":[{\"label\":\"display\",\"lat\":35.70702307908398,\"lng\":51.31716460382234}],\"cc\":\"IR\",\"city\":\"تهران\",\"state\":\"تهران\",\"country\":\"ایران\",\"formattedAddress\":[\"شهرک اکباتان، بیمه چهارم، بالاتر از پارک مینا، پلاک ۱۱۷\",\"تهران, تهران\",\"ایران\"]},\"canonicalUrl\":\"https:\\/\\/foursquare.com\\/v\\/gole-gandom-dizi-place--%D8%AF%DB%8C%D8%B2%DB%8C-%D8%B3%D8%B1%D8%A7%DB%8C-%DA%AF%D9%84-%DA%AF%D9%86%D8%AF%D9%85\\/56dd2da9498e60abde9c2b0f\",\"categories\":[{\"id\":\"4bf58dd8d48988d143941735\",\"name\":\"Breakfast Spot\",\"pluralName\":\"Breakfast Spots\",\"shortName\":\"Breakfast\",\"icon\":{\"prefix\":\"https:\\/\\/ss3.4sqi.net\\/img\\/categories_v2\\/food\\/breakfast_\",\"suffix\":\".png\"},\"primary\":true},{\"id\":\"4bf58dd8d48988d147941735\",\"name\":\"Diner\",\"pluralName\":\"Diners\",\"shortName\":\"Diner\",\"icon\":{\"prefix\":\"https:\\/\\/ss3.4sqi.net\\/img\\/categories_v2\\/food\\/diner_\",\"suffix\":\".png\"}}],\"stats\":{\"tipCount\":11,\"usersCount\":0,\"checkinsCount\":0,\"visitsCount\":0},\"likes\":{\"count\":22,\"groups\":[{\"type\":\"others\",\"count\":22,\"items\":[]}],\"summary\":\"22 Likes\"},\"dislike\":false,\"ok\":false,\"allowMenuUrlEdit\":true,\"beenHere\":{\"count\":0,\"lastCheckinExpiredAt\":0,\"marked\":false,\"unconfirmedCount\":0},\"specials\":{\"count\":0,\"items\":[]},\"reasons\":{\"count\":0,\"items\":[]},\"hereNow\":{\"count\":0,\"summary\":\"Nobody here\",\"groups\":[]},\"createdAt\":1457335721,\"shortUrl\":\"http:\\/\\/4sq.com\\/1QEX6sd\",\"timeZone\":\"Asia\\/Tehran\",\"listed\":{\"count\":12,\"groups\":[{\"type\":\"others\",\"name\":\"Lists from other people\",\"count\":12,\"items\":[{\"id\":\"5c442f49c58ed7002c699bc2\",\"name\":\"To go\",\"description\":\"\",\"type\":\"others\",\"user\":{\"firstName\":\"Yassin\",\"lastName\":\"A\",\"countryCode\":\"IR\"},\"editable\":false,\"public\":true,\"collaborative\":false,\"url\":\"\\/user\\/133999759\\/list\\/to-go\",\"canonicalUrl\":\"https:\\/\\/foursquare.com\\/user\\/133999759\\/list\\/to-go\",\"createdAt\":1547972425,\"updatedAt\":1548402839,\"photo\":{\"id\":\"59b7bb459be5223cd0a28bfb\",\"createdAt\":1505213253,\"prefix\":\"https:\\/\\/fastly.4sqi.net\\/img\\/general\\/\",\"suffix\":\"\\/175467132_NZY-fZxNFSqb4Q1Ww07T-ZDTxzl4uvLFRP1hHneYEFM.jpg\",\"width\":540,\"height\":960,\"visibility\":\"public\"},\"followers\":{\"count\":0},\"listItems\":{\"count\":8,\"items\":[{\"id\":\"v56dd2da9498e60abde9c2b0f\",\"createdAt\":1547972425,\"photo\":{\"id\":\"59b7bb459be5223cd0a28bfb\",\"createdAt\":1505213253,\"prefix\":\"https:\\/\\/fastly.4sqi.net\\/img\\/general\\/\",\"suffix\":\"\\/175467132_NZY-fZxNFSqb4Q1Ww07T-ZDTxzl4uvLFRP1hHneYEFM.jpg\",\"width\":540,\"height\":960,\"visibility\":\"public\"}}]}},{\"id\":\"570f2367498ec74c3ddcafd5\",\"name\":\"خسته\\u200cهای باصفا\",\"description\":\"\",\"type\":\"others\",\"user\":{\"firstName\":\"Vahid\",\"lastName\":\"M\",\"countryCode\":\"IR\"},\"editable\":false,\"public\":true,\"collaborative\":false,\"url\":\"\\/user\\/65569200\\/list\\/%D8%AE%D8%B3%D8%AA%D9%87%D9%87%D8%A7%DB%8C-%D8%A8%D8%A7%D8%B5%D9%81%D8%A7\",\"canonicalUrl\":\"https:\\/\\/foursquare.com\\/user\\/65569200\\/list\\/%D8%AE%D8%B3%D8%AA%D9%87%D9%87%D8%A7%DB%8C-%D8%A8%D8%A7%D8%B5%D9%81%D8%A7\",\"createdAt\":1460609895,\"updatedAt\":1524314531,\"photo\":{\"id\":\"55e591cc498e295a081e904c\",\"createdAt\":1441108428,\"prefix\":\"https:\\/\\/fastly.4sqi.net\\/img\\/general\\/\",\"suffix\":\"\\/65569200_0dhq9J6AiSDvDMdMUe8yOzhC9bJsBHyWjqDtDysuNxc.jpg\",\"width\":720,\"height\":960,\"visibility\":\"public\"},\"followers\":{\"count\":1},\"listItems\":{\"count\":36,\"items\":[{\"id\":\"v56dd2da9498e60abde9c2b0f\",\"createdAt\":1524314531}]}},{\"id\":\"5b23706e356b49002cdaaf84\",\"name\":\"دیزی\",\"description\":\"آبگوشت\",\"type\":\"others\",\"user\":{\"firstName\":\"Arian\",\"lastName\":\"M\",\"countryCode\":\"IR\"},\"editable\":false,\"public\":true,\"collaborative\":false,\"url\":\"\\/user\\/126363425\\/list\\/%D8%AF%DB%8C%D8%B2%DB%8C\",\"canonicalUrl\":\"https:\\/\\/foursquare.com\\/user\\/126363425\\/list\\/%D8%AF%DB%8C%D8%B2%DB%8C\",\"createdAt\":1529049198,\"updatedAt\":1529050090,\"photo\":{\"id\":\"5ac0aa8f9cadd93b8c0f3e09\",\"createdAt\":1522576015,\"prefix\":\"https:\\/\\/fastly.4sqi.net\\/img\\/general\\/\",\"suffix\":\"\\/449439859_qKlmKsNzCPg-57J6ci_Xt1U01wUUBvjPNcD2vmhDdtI.jpg\",\"width\":1440,\"height\":1920,\"visibility\":\"public\"},\"followers\":{\"count\":0},\"listItems\":{\"count\":21,\"items\":[{\"id\":\"v56dd2da9498e60abde9c2b0f\",\"createdAt\":1529049814}]}},{\"id\":\"59e4f19e2be425017399e03a\",\"name\":\"Favorite\",\"description\":\"\",\"type\":\"others\",\"user\":{\"firstName\":\"\",\"countryCode\":\"IR\"},\"editable\":false,\"public\":true,\"collaborative\":false,\"url\":\"\\/user\\/462660830\\/list\\/favorite\",\"canonicalUrl\":\"https:\\/\\/foursquare.com\\/user\\/462660830\\/list\\/favorite\",\"createdAt\":1508176286,\"updatedAt\":1508176497,\"photo\":{\"id\":\"59a04f45d8fe7a08a3e0184c\",\"createdAt\":1503678277,\"prefix\":\"https:\\/\\/fastly.4sqi.net\\/img\\/general\\/\",\"suffix\":\"\\/415796898_FumRwUi0q0rM3fjtd_OSq6uetu7dBZZFK9Swk4x0OGw.jpg\",\"width\":1440,\"height\":1920,\"visibility\":\"public\"},\"followers\":{\"count\":0},\"listItems\":{\"count\":6,\"items\":[{\"id\":\"v56dd2da9498e60abde9c2b0f\",\"createdAt\":1508176382}]}}]}]},\"seasonalHours\":[],\"pageUpdates\":{\"count\":0,\"items\":[]},\"inbox\":{\"count\":0,\"items\":[]},\"venueChains\":[],\"attributes\":{\"groups\":[{\"type\":\"price\",\"name\":\"Price\",\"summary\":\"\$\",\"count\":1,\"items\":[{\"displayName\":\"Price\",\"displayValue\":\"\$\",\"priceTier\":1}]},{\"type\":\"serves\",\"name\":\"Menus\",\"summary\":\"Breakfast\",\"count\":8,\"items\":[{\"displayName\":\"Breakfast\",\"displayValue\":\"Breakfast\"}]}]},\"bestPhoto\":{\"id\":\"5d69282b6c6d240008ca37c5\",\"createdAt\":1567172651,\"source\":{\"name\":\"Swarm for iOS\",\"url\":\"https:\\/\\/www.swarmapp.com\"},\"prefix\":\"https:\\/\\/fastly.4sqi.net\\/img\\/general\\/\",\"suffix\":\"\\/182403164_QzfOLr0p_oMz4Cjj-tPZivQD9LMW8UAVPgSAwW-Hpgc.jpg\",\"width\":1440,\"height\":1920,\"visibility\":\"public\"},\"colors\":{\"highlightColor\":{\"photoId\":\"5d69282b6c6d240008ca37c5\",\"value\":-15196136},\"highlightTextColor\":{\"photoId\":\"5d69282b6c6d240008ca37c5\",\"value\":-1},\"algoVersion\":3}}}}"

    override suspend fun venueDetail(
        venueId: String,
        clientId: String,
        clientSecret: String,
        apiVersion: Int
    ): VenueResponse {
        if (shouldThrowIoException)
            throw IOException("This is test io exception")

        return runCatching {
            moshi.adapter(VenueResponse::class.java).fromJson(venueApiSampleResponse)
        }.getOrNull() ?: throw IOException("Cannot convert from json")

    }
}